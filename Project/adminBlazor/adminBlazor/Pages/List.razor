@page "/list"
@using adminBlazor.Models

<!--<script src="_framework/blazor.server.js"></script>!-->

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

<link href="_content/Blazorise/blazorise.css" rel="stylesheet" />
<link href="_content/Blazorise.Bootstrap/blazorise.bootstrap.css" rel="stylesheet" />
<h3>List</h3>

<div>
    <NavLink class="btn btn-primary" href="Add" Match="NavLinkMatch.All">
        <i class="fa fa-plus"></i> Ajouter
    </NavLink>
</div>

<DataGrid TItem="UserModel"
          Data="@_users"
          ReadData="@OnReadData"
          TotalItems="@totalUser"
          PageSize="10"
          ShowPager
          Responsive>
        <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Id)" Caption="id" />
       <!-- <DataGridColumn TItem="User" Field="@nameof(User.Password)" Caption="Password" /> -->
    <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Name)" Caption="Name" />
        <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Email)" Caption="Email" />
        <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Surname)" Caption="Surname" />
        <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Nickname)" Caption="Nickname" />
       <!-- <DataGridColumn TItem="User" Field="@nameof(User.Image)" Caption="Image" /> -->
        <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.ExtraTime)" Caption="Extra Time" />
        <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Group)" Caption="Group" />
    <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Roles)" Caption="Roles">
        <DisplayTemplate>
            @if (context is UserModel user)
            {
                @if (user.Roles != null && user.Roles.Any())
                {
                    @string.Join(", ", user.Roles)
                }
                else
                {
                    <span>Aucun rôle</span>
                }
            }
        </DisplayTemplate>
    </DataGridColumn>
    <DataGridColumn TItem="UserModel" Field="@nameof(UserModel.Id)" Caption="Modifier">
        <DisplayTemplate>
            <a href="EditUser/@(context.Id)" class="btn btn-primary"><i class="fa fa-edit"></i> Editer</a>
            <button type="button" class="btn btn-primary" @onclick="() => OnDelete(context.Id)"><i class="fa fa-trash"></i> Supprimer</button>
        </DisplayTemplate>
    </DataGridColumn>
    </DataGrid>


